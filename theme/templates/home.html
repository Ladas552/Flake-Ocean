{% extends "base.html" %}
{% block seo_tags %}
<meta property="og:title" content="{{ config.title | title }}" />
<meta property="og:type" content="website" />
<meta property="og:url" content="{{ metadata.permalink }}" />
<meta property="og:description" content="{{ metadata.description }}" />
<meta property="og:site_name" content="{{ config.title }}" />
<meta property="og:locale" content="{{ config.language }}" />
<link rel="canonical" href="{{ config.rootUrl }}" />
<meta name="robots" content="index, follow" />
{% endblock seo_tags %}

{% block title %}{{ metadata.title | title }}{% endblock title %}

{% block content %}
{{ content | safe }}

{# Recent Posts #}
{% if posts | filter(attribute="draft", value=false) | length > 0 %}
<h2>Recent Posts</h2>
{% for post in posts | filter(attribute="draft", value=false) | sort(attribute="created") | reverse | slice(end=5) %}
<div style="margin: 1.5em 0; padding-bottom: 1em; border-bottom: 1px solid var(--border);">
  <h3 style="margin-top: 0;">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
  </h3>
  <p style="color: var(--text-muted); margin: 0.5em 0;">
    <time datetime="{{ post.created }}">{{ post.created | date(format="%B %e, %Y") }}</time>
  </p>
  {% if post.description %}
  <p style="font-style: italic;">{{ post.description }}</p>
  {% endif %}
  <p>
    {% if post.truncate_char and post.truncate_char is matching("^nil$") %}
    {% set truncate_char = "" %}
    {% else %}
    {% set truncate_char = "â€¦" %}
    {% endif %}
    {{ post.raw | striptags | truncate(length=150, end=truncate_char) | safe }}
  </p>
</div>
{% endfor %}
{% endif %}
{% endblock content %}