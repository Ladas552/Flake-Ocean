{% extends "base.html" %}
{% block seo_tags %}
<meta property="og:title" content="Posts - {{ config.title | title }}" />
<meta property="og:type" content="website" />
<meta property="og:url" content="{{ metadata.permalink }}" />
<meta property="og:description" content="Posts on {{ config.title | title }}" />
<meta property="og:site_name" content="{{ config.title }}" />
<meta property="og:locale" content="{{ config.language }}" />
<link rel="canonical" href="{{ metadata.permalink }}" />
<meta name="robots" content="index, follow" />
{% endblock seo_tags %}

{% block title %}Posts{% endblock title %}

{% block content %}
<h1>Posts</h1>

{% for post in posts | filter(attribute="draft", value=false) | sort(attribute="created") | reverse %}
<div style="margin: 1.5em 0; padding-bottom: 1em; border-bottom: 1px solid var(--border);">
  <h2 style="margin-top: 0;">
    <a href="{{ post.permalink }}">{{ post.title }}</a>
  </h2>
  <p style="color: var(--text-muted); margin: 0.5em 0;">
    <time datetime="{{ post.created }}">{{ post.created | date(format="%B %e, %Y") }}</time>
  </p>
  {% if post.description %}
  <p style="font-style: italic;">{{ post.description }}</p>
  {% endif %}
  <p>
    {% if post.truncate_char is defined and post.truncate_char is matching("^nil$") %}
    {% set truncate_char = "" %}
    {% else %}
    {% set truncate_char = "â€¦" %}
    {% endif %}
    {{ post.raw | striptags | truncate(length=200, end=truncate_char) | safe }}
  </p>
</div>
{% endfor %}
{% endblock content %}